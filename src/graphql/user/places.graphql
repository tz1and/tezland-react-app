query getPlacesWithItemsByTag($tag: String!, $offset: Int!, $amount: Int!) {
    placeToken(where: {worldItemPlacements: {itemToken: {metadata: {tagMap: {tag: {name: {_eq: $tag}}}}}}}, limit: $amount, offset: $offset, order_by: {tokenId: asc}) {
        tokenId
    }
}

query getPlacesWithSwapsByTag($tag: String!, $offset: Int!, $amount: Int!) {
    placeToken(where: {worldItemPlacements: {itemToken: {metadata: {tagMap: {tag: {name: {_eq: $tag}}}}}, mutezPerToken: {_gt: "0"}}}, limit: $amount, offset: $offset, order_by: {tokenId: asc}) {
        tokenId
    }
}

query countPlaces($fa2: String!) {
    placeTokenAggregate(where: { contract: { address: { _eq: $fa2 } } }) {
        aggregate {
            count
        }
    }
}

query getWorldGridCell($gridHash: String!, $fa2: String!) {
    placeTokenMetadata(where: { gridHash: { _eq: $gridHash }, placeToken: { contract: { address: { _eq: $fa2 } } } }) {
        placeToken {
            tokenId
        }
    }
}

query getPlaceOwner($id: bigint!, $fa2: String!) {
    placeTokenHolder(limit: 1, where: { token: { tokenId: { _eq: $id }, contract: { address: { _eq: $fa2 } } } } ) {
        holderId
    }
}
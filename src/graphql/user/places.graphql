query getPlacesWithItemsByTag($tag: String!, $offset: Int!, $amount: Int!) {
    placeToken(where: {worldItemPlacements: {itemToken: {metadata: {tagMap: {tag: {name: {_eq: $tag}}}}}}}, limit: $amount, offset: $offset, order_by: {tokenId: asc}) {
        tokenId
    }
}

query getPlacesWithSwapsByTag($tag: String!, $offset: Int!, $amount: Int!) {
    placeToken(where: {worldItemPlacements: {itemToken: {metadata: {tagMap: {tag: {name: {_eq: $tag}}}}}, mutezPerToken: {_gt: "0"}}}, limit: $amount, offset: $offset, order_by: {tokenId: asc}) {
        tokenId
    }
}

query countExteriorPlaces {
    placeTokenMetadataAggregate(where: {placeType: {_eq: "exterior"}}) {
        aggregate {
            count
        }
    }
}

query getWorldGridCell($gridHash: String!) {
    placeTokenMetadata(where: { gridHash: { _eq: $gridHash }, placeType: { _eq: "exterior" } }) {
        tokenId
    }
}

query getPlaceOwner($id: bigint!, $placeType: String!) {
    placeTokenHolder(limit: 1, where: { token: { tokenId: { _eq: $id }, metadata: { placeType: { _eq: $placeType } } } }) {
        holderId
    }
}